---
format: live-html
engine: knitr
lightbox: true
webr:
  resources:
    - https://raw.githubusercontent.com/LizzieWadsworth/Level-4-R-course-book/refs/heads/main/Datasets/LocustSerotonin.csv
  packages:
    - ggplot2
    - dplyr
---

{{< include /_extensions/r-wasm/live/_knitr.qmd >}}

# Pearson's coefficient: using cor.test()

Our second example uses `cor.test()`. This gives us the R value - how strong is the correlation?
```{r}
#| eval: false
# Open heart.csv and save as a dataframe
heart_df <- read.csv("heart.csv") 

# Calculate correlation statistics using cor.test()
correlation_stats <- cor.test(heart_df$age, heart_df$restbp, method = 'pearson')

# Print the results to the console (output)
correlation_stats$p.value #print the p value 
correlation_stats$estimate #print the R value
```
```{r}
#| echo: false
# Open heart.csv and save as a dataframe
heart_df <- read.csv("../Datasets/heart.csv") 

# Calculate correlation statistics using cor.test()
correlation_stats <- cor.test(heart_df$age, heart_df$restbp, method = 'pearson')

# Print the results to the console (output)
correlation_stats$p.value #print the p value 
correlation_stats$estimate #print the R value
```

As you can see that works very similarly to our first example, except for the last two lines.

`cor.test()` gives us a list of 9 values, there are only two we are interested in:

-   `p.value` is our probability p value
-   `estimate` is our correlation coefficient (R value, same as [from the cor function](using_cor_function.qmd))

R value result: 0.2793509 is a weak-moderate positive correlation. 

P-value result: 7.762269e-07 _which is_ 0.0000007762269. This is much smaller than 0.05, which means there is less than a 5% probability of this result if no real effect exists. 
It is **statistically significant**

::: {.callout-note title="e-07" collapse="false"}
_“e-07” means you multiply by 10⁻⁷, which moves the decimal point 7 places to the left._ 
:::
